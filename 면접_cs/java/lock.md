
## 데이터베이스 락(Lock)

데이터베이스 락은 여러 트랜잭션이 하나의 데이터로 동시에 접근할 때, 제어하는 방법입니다.

- 공유락
    - 데이터를 읽을 때 사용되는 락으로, 공유락 간 읽는 건 가능하지만 데이터를 쓰는 걸 방지합니다.
      일반적으로 select 경우 사용됩니다.
- 베타락
    - 데이터를 변경할 때 사용되는 락으로, 트랜잭션이 완료될 때까지 데이터에 어떤 접근도 허용하지 않는 걸 말합니다.

- 사용경험

  주문서비스 내 상품재고를 계산하면데 데이터 정합성 이슈가 생기게 되었고,
  이때 JPA Pessimitic Lock + 베타 락을 사용하여 동시성 이슈를 해결한 경험이 있습니다.
  이때 transaction이 데이터를 점유하기때문에 일정시간이 넘게 되면 해당 트랜잭션을 롤백한 경우가 있으며