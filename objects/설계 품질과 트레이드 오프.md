
## 설계 트레이드 오프

데이터 중심 설계와 책임 주도 설계를 비교하기 위한 척도 3가지
- 캡슐화
- 응집도
- 결합도

### 캡슐화

사용 이유 : 
- 내부 구현을 외부로부터 감추기 위해서
  (구현은 변경될 가능성이 높다)
- 전체 시스템에 영향을 끼치지 않도록 조절할 수 있다.

결론 : 
- 객체를 사용하면 변경 가능성이 높은 부분을 내부에 숨기고, 외부에는 상대적으로 안정적인 부분만 공개하여
  변경에 유연하다.

>  구현 : 변경될 가능성이 높은 부분 <br>
> 인터페이스 : 변경될 가능성이 상대적으로 안정적인 부분


<br>

_객체를 설계하기 위한 가장 기본적인 아이디어는 변경의 정도에 따라 <br>
**구현과 인터페이스를 분리하고 외부에서는 인터페이스에만 의존하도록** 관계를 조정해야 한다._


<br>

설계가 필요한 이유는 요구사항은 항상 변경되기 때문이다. <br>
캡슐화가 중요한 이유는 불안정한 부분과 안정적인 부분을 분리해서 변경의 영향을 통제할 수 있기 때문이다.

_캡슐화란, 변경가능성이 높은 부분을 객체 내부로 숨기는 추상화 기법이다._

<br>

### 그러면 어떤 걸 캡슐화 해야하는가?

변경될 수 있는 어떤 것이라도 캡슐화 해야한다. <br>
이것이 객체지향 설계의 핵심이다.



## 응집도 & 결합도

### 응집도 

모듈에 포함된 내부 요소들이 연관돼 있는 정도
- (변경의 관점에서) 응집도란 **변경이 발생할 때, 모듈 내부에서 발생하는 변경의 정도**
- 하나의 책임이 변경될 때, 모듈 전체가 함께 변경된다면 이는 응집도가 높다고 할 수 있다.

- 응집도가 높을수록, 변경의 대상과 범위가 명확하며 코드를 변경하기 쉬워진다.

### 결합도

의존성의 정도를 나타내며, 다른 모듈에 대해 얼마나 많은 지식을 갖고 있는지 나타내는 척도
- (변경의 관점에서) 결합도는 **한 모듈이 변경되기 위해서 다른 모듈의 변경을 요구하는 정도**
- 내부 구현을 변경했을 때, 다른 모듈에 영향을 미치는 경우에는 두 모듈 사이의 결합도가 높다고 할 수 있다.


<br>

### 그러면 어느정도가 응집도가 높다고 하며, 어느정도가 결합도가 낮다고 할 수 있는가?

이는 설계와 관련이 있다. <br>
**좋은 설계는 높은 응집도와 낮은 결합도를 가진 모듈로 구성된 설계**를 말하며, <br>
어플리케이션이 구성하는 각 요소의 응집도가 높고, 서로 느슨하게 결합돼 있다면 그 애플리케이션은 좋은 설계를 가졌다고 
볼 수 있다.


_좋은 설계는 오늘의 기능을 수행하며, 내일의 변경을 수용할 수 있는 설계이다._

그렇다. 응집도와 결합도는 **변경**과 관련된 것이다.



### 정리

캡슐화의 정도가 응집도와 결합도에 영향을 미친다. <br>
캡슐화를 지키면 모듈 안의 응집도는 높아지고, 모듈 사이의 결합도는 낮아진다.


# 데이터 중심의 영화 예매 시스템의 문제점

## 캡슐화 위반

데이터 중심 설계는 캡슐화를 위반하고 객체의 내부 구현을 인터페이스와 일부로 만든다.<br>
반면, 책임 중심 설계는 객체의 내부 구현을 안정적인 인터페이스 뒤로 캡슐화한다.



_구현을 캡슐화 할 수 있는 책임은 협력이라는 문맥을 고려할 때만 얻을 수 있다._


## 높은 결합도

데이터 중심 설계는 접근자와 수정자를 통해 내부 구현을 인터페이스로 노출하기 때문에 
캡슐화를 위반한다.
이는, 구현 내부가 인터페이스에 노출된다는 것은 클라이언트가 구현에 강하게 결합된다는 것이다.





